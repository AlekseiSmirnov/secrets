# Simple Secret Sharing

<a href="https://www.dyne.org"><img
	src="https://secrets.dyne.org/static/img/swbydyne.png"
		alt="software by Dyne.org"
			title="software by Dyne.org" class="pull-right"></a>

## Social and decentralised management of secrets


<h2>Demo: <a href="https://secrets.dyne.org/share">secrets.dyne.org/share</a></h2>

<a href="https://secrets.dyne.org/share">
	<img src="https://secrets.dyne.org/static/img/secret_ladies.jpg"
		title="try it online" alt="use secrets online" style="overflow: hidden">

[![Build Status](https://travis-ci.org/PIENews/secrets.svg?branch=master)](https://travis-ci.org/PIENews/secrets)

Secrets can be used to split a secret (like a password) into pieces to be distributed to friends. When all friends agree, the pieces can be recombined to retrieve the original secret password, for instance to give consensual access to a private document or service.

Secret sharing can be useful in many different situations and this tool is a very simple and highly available implementation of secret sharing, free for anyone to use, locally installed or from this website.

Secrets uses the underlying [FXC](https://github.com/dyne/FXC) cryptographic protocol, whose use cases relate to trust management and social digital currency, explained in detail in the deliverable [Implementation of digital social currency infrastructure (D5.5)](http://dcentproject.eu/wp-content/uploads/2015/10/D5.5-Implementation-of-digital-social-currency-infrastructure-.pdf) produced as part of the [D-CENT project](http://dcentproject.eu) and adopted as a component of the social wallet toolkit being developed for the [PIE project](https://github.com/pieproject).

## How reliable is this service

Secret is written in a stateless language, does not make use of any database nor atoms and all content passing through it is not saved, only transformed and shown on screen.  This service is a functional demo allowing anyone to split up to 1Kb of secret data into 5 shares of which 3 (a number we call "quorum") are enough to recover the initial secret. 

Anyone planning to use Secrets for mission critical environments is encouraged to build his/her own version: this is possible on any PC operating system supporting Java. By running Secrets autonomously is also possible to change its configuration, for instance to:
- accept larger secrets
- split into more or less than 5 shares
- change the minimum amount of shares needed to recover the secret
- change the alphabetical subset used to compose the shares
- change the cryptographic "salt", a secret key that is unique to each installation

If the secret being shared is really precious one should also consider adding an additional layer of encryption, for instance by using symmetric password encryption or even the public keys of all participants.

To share large files it is recommended to use filesystem encryption (for instance using our other software [Tomb](https://dyne.org/software/tomb)) with a key that is then shared: this way the encrypted files can be stored in duplicate copies in possession of every participant, but they will be accessed only when enough participants agree.

## Building Secrets on your own computer


<img class="pull-right" src="https://secrets.dyne.org/static/img/clojure.png">

Secrets is written in Clojure and is fully cross-platform: one can run it locally on a GNU/Linux machine, as well on Apple/OSX and MS/Windows.

<img class="pull-left" src="https://secrets.dyne.org/static/img/leiningen.jpg"
	style="padding-right: 1.5em">

The following software is required: [OpenJDK](http://openjdk.java.net), [Clojure](http://clojure.org), [Leiningen](http://leiningen.org).

For instance on Devuan systems one can install all necessary dependencies using apt and the following packages: `apt-get openjdk-7-jdk libversioneer-clojure haveged`.

then install Leiningen which will take care of all Clojure dependencies:

```
mkdir ~/bin
wget https://raw.githubusercontent.com/technomancy/leiningen/stable/bin/lein -O ~/bin/lein
chmod +x ~/bin/lein
```

then from inside the Secrets source, start it with:

```
lein ring server
```

This command will open a browser pointing on the service running locally on http://localhost:3000

To start only a web server for the application, but no browser, run: `server-headless`

### Configure

The configuration file used by Secrets is found in its own directory (the one where its started from) and called `config.json`, an example holding defaults is `example-config.json`. To run Secrets in production is at least necessary to change the `salt` configuration item with a random generated string which has to remain constant for the installation and should not be made public. The salt of an installation is important for all those who use that particular instance, since it is a cryptographic element necessary to retrieve all secrets generated by that installation.

Other configuration items are self explanatory and can be left untouched.

## Acknowledgments

Secrets is Free and Open Source research and development activity funded by the European Commission in the context of the [Collective Awareness Platforms for Sustainability and Social Innovation (CAPSSI)](https://ec.europa.eu/digital-single-market/en/collective-awareness) program. It was developed within the [Decentralised Citizen Engagement Technologies](http://dcentproject.eu) project (grant nr. 610349) and further adopted and maintained by the [Commonfare](http://pieproject.eu) project (grant nr. 687922).

Industry standard addressed: Information technology -- Security techniques -- Secret sharing
- [ISO/IEC 19592-1:2016](https://www.iso.org/standard/65422.html) (Part 1: General)
- [ISO/IEC FDIS 19592-2 (Under development)](https://www.iso.org/standard/65425.html) (Part 2: Fundamental mechanisms)

The [Secret Sharing](https://en.wikipedia.org/wiki/Secret_sharing) algorithm adopted is based on [Shamir's Secret Sharing](https://en.wikipedia.org/wiki/Shamir%27s_Secret_Sharing), references:
- Shamir, Adi (1979), "How to share a secret", Communications of the ACM 22 (11): 612–613
- Knuth, D. E. (1997), The Art of Computer Programming, II: Seminumerical Algorithms: 505

The implementation used is by Tim Tiemens with a 4096 cipher prime number. The Integer Compression algorithm used internally is the FastPFOR128 by Daniel Lemire, see: Lemire, D. and Boytsov, L. "[Decoding billions of integers per second through vectorization](http://arxiv.org/abs/1209.2137)" (2015).

## License

Secrets is Copyright (C) 2015-2017 by the Dyne.org Foundation

Secrets and the FXC protocol and library are designed, written and maintained by Denis Roio <jaromil@dyne.org>

Thanks for ideas and inspirations to Marco Sachy and Enric Durán Giralt.

```
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
```
